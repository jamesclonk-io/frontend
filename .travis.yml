language: go

go:
  - 1.5

env:
  global:
    # pivotal user/pw
    - secure: "jYU44p7icLqP3cGjzW3MGka4hS7FLaZlESDJY6etgFyq8SDUlWIo6sxRr0wgpJ1pLFYiizgdVbZL2rRN3TMF8baoz/3NcFeyi4VPMGIjZJ0Mg3l/FyMl5xNPjzUnuhn6t/H5Z0maFtYGRktIkkge4JyPPY8+x4OxsOWkcs7owfXNTVAixtKxVTNFMWFDPEH9LRzY6AvCoTTxV1ikYpm8QvG0B29M6l3/UL0kPYu8ZxM9i65K4ijINi4ako/UKobicY/AnN1jRFSqNCoNswOpg8TFdD4BEIgJlzKyXseOcyDMX94fUEVaUnFJacXofftlCYhPhzdUyLHka/58NgCsXuT+CAf5sAGc6QzJAQsfpbpVvyiHLkJ783xN8U5FGcHE9ZzjuUJy5W7XGKZfZ7Ztydc9paaAB/CbkrKdKeXV/T6Vqu6Y267T9hlEGZ9v8wsmiDYVrCt1kdNlS6VAG22+6N9vHznnpLHOaSkJFnWiomNwA9h7lSj5AzStcYW01Kj3V8hIYlkIw148PqXFd9mHyXd31LM1GQVTyccFs6QEngBBVgCxFjwoV8GD6FnfsQDSqtnGnj1IvqWJ1kss1oCu/kVFlKxyTsCvP6dSkr0ru8FyVDyn4T130VH3JTGhrLLLtB9mjLn2RaY1xkUEkaIK4BfQ0RArzdwbfEixrF3axGQ="
    - secure: "KnxD0E0+h0Qj+/97/QS/+WOrg0x4jCUOxY4oUWPbNguYhR6wUEveHgFoJTqMNo/0K6lKKcl4gbz1fVKYQmJeEi75jXP/6lqIAnRATVtvW/RVUypmhosmqiW5zJk0FzZqM/qioIFDGD4EVp/Myza7YIWRRc6oRiWGhEgxj34tYzWQgznNaZH6Ov6b7vLCGJz8BK7LZiDXgnHh3W4e8ZN1z8ylit7IqkeBar1Jms40FZgpwosGCCOxFow8m5gd/3t1V5T5lwhb3KYXmh2eNqTStZPwRrMu3oCzS0eRIgO8ggkekTuIk1oedFU7J8dDO4VqohgibDP1PPxku6zZB/pdAUK4jONsQz2UdecmfMlpfrTMR8HcQFiSEOJff2owNVvCGlB399NzaTUGuMMKhw6JUIGWUM8ffeRe5pFAFWJ26dwQLqR7DT7plxJcHyMmkQsXmLXnYQSKc+vSYePgbawFdbCfbTjxTksLKh/TMQIoGzxSgGg45LnvRmUIqIgbH+Wvaz3ZpO1CgQ9FiNysXpf/R12K3yngLBllQ8oyhYs8nT7IzuKF5Rd7y0q/HvzumZgMwoXV+uTQmzdUeeTnqYJloNjiwpsOey8Bqyqh1zRw05AE0zBrCH3L2q14MF4jr8C0yNc9EH9cdcrmvkkVz2GHVCetjb9eGnpOdt8I5kXInu8="
    # ibm user/pw/org
    - secure: "cEaXhWyZ7VOZMsDuj05rDap9NGK91SUPL1Qpiega4tLbvBHMqhTOHKzo7LGRs1gs258g/mFpL+O1f5mIQXapuMeGo2S4F0kFJRtINnOEYL73nCYVTR01b3z/wkh/MQ0vWDwBZ1lrZNf46A5KTBccu322gmSq0En8Qd6huBjvBANty24wM7l0716XZYnSs7qwVVzC5sdv/OR/iXf8hBNM2lmAIoO6eX+wks9am6B+BUpCzlbhHMGpwlzc9UA9GzLbmbmWboCKMd+IVqpZQbop/d1kji/PrghGWmr23MR+uerSEYOGFj/4YsBKIDsyLXHqUvVRcGwrolaaePs7M7s+Ox9qhqn8nCpFLjOeifRYgm0xEl1FGDhMFq8mxIvgtBb9L9fBi67/kENMLR6UJ++KrcFWuVXl1xg9VO0OfXEp7RqbdwlTm8oD7XKCE+2PCpOiNJx0DVNl28rK1vNynmKZH8kyo69ykGiOlLMyLieokR6SR2isbluNw7//DuyqRLnQk+ygE2b31xmls1b5VizL0zM2z5qNGshZnS33aWMSXyoh/WtoMDmbB9OAwj5JFCjOofQ793g1BBcdi8sqpkoPb/wKXR8urWU4sSyHRI17bUC33Z937h/rhUfJrCoe5T6KPdgs05DlddpK9G9cl0RRG2giZibqLTxYVEpUhokhpek="
    - secure: "g51/YDpoPf1rEO3DEyJKc3VC0LzxTjDSSc8RkdRXm648AN12C0m2Q3tHRxmmzfNs7TP51mNYalOjqjADe4gfFhoE2ubbKC1JpCqsrWJ/bnG/GqLxuAkIk/YTnjURsg06uD4wzJanzzSlT/9fqia3ib9Dv4PrYZN1Ym0CXXienpSEelnFZQZ9FpWnSvXMmBOd+STOTLjgc/Q0F3Y8Y59J0ifI9XjS1BlsSP/NlSavQ9x/EJ4x4mSwGEWt4lIvZgD66WSTk2G8pFi/NLX5L+0SWvHTx71VTbY9U0C92pzW8b/v+VnegfOAvhf8wHOSJocX0wQptT121acW38eWcK10DTlzMtAxcO8Zj4yvcp3vdhIcLzkAkpQBGdIvWe0Pt7ZAu44kydeaD/g0r+tm+m8j5Cubb9i1AVlbIaHMlzT9Pg5XYERqoI2FIjy/yNIy2JrwBLhZ4FMHc7LxKdGcJgIonHsuGvxv1DyVn/1IX8Q6RVAvkbAa+W1zxZn9SvHCqU7V8jVKOT+i/ZoeNl7k+oRPRTDl4BaNG4N2SyzB5ETR+4x6hOUbnaQBtJ9Z6tMx+acE0R/vv/HN/l4bakVe95lQwZ4rNJ5BqKXpPW+B3AIe1D7px/N94tZMR/7gC93Jqwq++ST5KKUluwkCfbyhHK7KOAa8h2C+16tCe3ixWQA3KuQ="
    - secure: "pcswTYKzKSoIIV5O0R9oJ5Yg1WfvIuaQiBIdEiZ6apKgfLaKf/UUsuU8o4gO9Xit+c1n4If6mkkg8eTibBVl/l1LNt7EWX7MpmCond4SUNwBVg0UqcjsuU30j2zN+RNUGgZVPSCzgJ2qoHvuB6OQ04VkkEuUDOEmaNqlCTtAvWnskw1v7Y9lc85o3RLvBgV+3BiPBAtQFN5J7A31JfougWWMUx/T8YSTXAfLUrX2l9MPttLPOBgmmfbXV0Hxiu3Ui6HaLjUtNlrzYAnyuk5yovE/atln7vvsO+R8F3f6Ulo8vZ5q/ZCQRkWXcC66QTLgsH5d90lEEmyni1SsCPTiCbavKm5NasAKmVHFVdBwHG/2SfwX5jgTvoIvGyKJO9w1qhpgsLAYiymUEu7JeDkB6pXzc3lZ7nFi68G681KMVN0qoNA2yK0HN1JrLKRo+PJsulnGqoiXuDGAnhcZ50+ui41RdAAvEuWl+I5ltGX95yRGgYLoDVGUzaSw/Rbzdg4SiQBSQLp2urBuLdJAJucoX7ib8bJX97cSyhvEJefiYY7zjB/HLd9Li/v2pn/lyAdh6fBLlNB999EAihG9Dcb8SrRPE+7TD7E+3isd0KliGOAnvNND3tZri0LsBPorrYAK1VzR999BOXs8kxO/lNLGS8rUyGL8ZiAC9Wzd9K/JiZk="
    # swisscom user/pw/org
    - secure: "JhJnE2vHzQeFECj8W42o1cpLC44JD8cr59uMj8SICTvUAoBK2giK6Wj+n8uj1UuksTl2c0ftOqSCjEs5SVk6Po6EDoMmTvSWzghNEKpcCHuBeVhA/aGQmuiFrvcKQWagOQJJibVJQK/7Y6upmVVOPu2XR0Cwj9aJwTd51rOJSNpNLdq/9dlqXqZm/qInyZiFHdR7ghX3Lfop4jaNPKcJC/IUAkkTX/dRWxAxdl9Bgzv+OxD+9jw/XRxVNaK+vZ2v4vPk8Wrj+xzX1whRGgsJEN8TV0VmcO7fGrStFFpLuJ8qBQzHKtcs4Mj0svBhH0LE3Fbc7icGCOWxXMH7oXMRp9sslE6JT9Yb/8LbvY7pZPLSrB3yDN6zGqXGUExYhW1sWa0EkMwGQXf0lqJfwFzkjAV7nulKeNvqGCbs1txvqBFDCnr3O9UyvJAWsOwrRv7Dx/I0jgRTD+MI7+mRwj7vhkOy7iO9FN9zFfHKZic+0waivIqKsjLOC5PX5x5K/a0ODkWc35xy1C19L05DBFYdiXKHCWllpKNv/YyZl+Nxw9YYxNfHTyhy/u9PJfi+VlV1DpMWAZvQz2i5Q4AAf/L33Al2AUCJ6HA9A/g9J86vjw6SobBgUYxsPukPPo9+Hvnaf8FUAVjoEknnae4ZLzLP6q2YwO5xqD47bEVGX/hqJf0="
    - secure: "lMggiopn0a/PT/jt8xW28b4r9SFgwSifCXHHRaqMOAiXH/cVNbafmnu1vYpWozgtcysa/Ay1lwi6oM2ghcF6HPSM3lSGoxENKvHQFAlDVi0x5XNH98DKdSKecWwT8doHIAgBUSQQsYfuXvE6WvdN/2TPk1Kj2Xij4PQT3N943AESYrZXg2U272U4zzqowLURgsWRuHA4M14VJIv2PiUizJTj2JFgdMceFyvzDoZPO/ISOSOYP7S5DwQVgyAEtgYn3strlMtA8u/kkP5BemU4xUdHGJgOotUoG6keSkWJyTg5q+iFB8N2odsMnT/jPXXFtME5aaZ/rqxhnLrMirtE6WxZl2ksggYIr9GIFFFiL9Hb2ekYPigSDQjcQpVYnutAs+y0Ik2tf8Qb4WHBqr+Xriy8FTpk4C9z407TuKJEn08r7+AxLr+LcmPVaKcmQ+4WFkYJj2bpFUtFYyxfsb8stO497Wqt1LWR7dG+vUdAGfGfinfDHWNLwdYAYWwLdI/5GkzU78dTL15tud99NNJg/qkImpXQ/d8VfhqKm/aUSrr0Qczh774V2DSzCBlNWgzzumOpm2fC/uHQLM6cSnHu6wx/ebx74vs0O32Ipx6+Qt5h0lrB21f4vmnNkdHEL/pfNz4W+Ptp2Xgk+yDeEcZR21UMondSQ3zwcn8mY3yj/Gg="
    - secure: "bIK/351xoJBQ7J/1RGazP4QDzIdJcvdacD0HPuX+thFzBDccwDW7BOtrIZ/s2qaOtD9V5kmT8Qb/yWh+0c1k7gQSP2DiAtCRG7rL/3UjGFVo73JkqmLtjm9G2hCXtw7r05iEEDnxtHHZAmpgz60HphyplLz+UAVqtMWoNu3qq0/3tMR5kH9l7Wu0g+WBVA1BkI4VLHcIhFusQLyJeZ7lSc1tkVccOL77Ae6jfbLh+6A4BEevBlyAXeT8Zp0abOOp7cAn8wLzCN8Aexcj9Nchq2lVuhSPB1n3EEboJQXn1YmNcpZcANpjqgRyDutlSmnTYnIxP06KpWV0tk4yTSzN4p+cTx27SP3HUIbKV0KSkm/88/Bn2QoEgR+HlHjcaIZ5WQBVqn3qMiyfgqt/HrkaOdMTzMPYedkaK1wHJ5tA2KX2cg+4W0DYZTHVcmDLk1ip/LZoWgWQnZtjesnyUCkDH3n4r/LerbWhojI4MUyVVUifNJsLKXLFf5+0P1rYwOLB6YMbCjHe1oiihYMHJGrIfXID0yVUaQQSnzns2ymsAZlmUHoM3iSCk5aKR3eAl+Lw2JQu2PmEfU9VRfUsWTvw8MPj5pldFobVuCz4is4c9eSY7MGh7cn0t4EHNbfdRw+fIQIM8prZryB/nTS5XvAvjQnGwIpEwgs5KEkPjOvlIU0="

script: go test -v ./...

## swisscom
after_success:
    - "wget 'https://cli.run.pivotal.io/stable?release=linux64-binary&version=6.19.0&source=github-rel' -qO cf-cli.tgz"
    - "tar -xvzf cf-cli.tgz"
    - "chmod +x cf"
    - "rm cf-cli.tgz"
    - "./cf api https://api.lyra-836.appcloud.swisscom.com"
    - "./cf login --u $APC_USERNAME --p $APC_PASSWORD --o $APC_ORGANIZATION --s PROD"
    - "./cf push"
    - "./cf logout"

## ibm
# after_success:
#     - "wget http://go-cli.s3-website-us-east-1.amazonaws.com/releases/latest/cf-cli_amd64.deb -qO temp.deb && sudo dpkg -i temp.deb"
#     - "rm temp.deb"
#     - "cf api https://api.eu-gb.bluemix.net"
#     - "cf login --u $BM_USERNAME --p $BM_PASSWORD --o $BM_ORGANIZATION --s dev"
#     - "cf push"
#     - "cf logout"

## pivotal
# after_success:
#     - "wget http://go-cli.s3-website-us-east-1.amazonaws.com/releases/latest/cf-cli_amd64.deb -qO temp.deb && sudo dpkg -i temp.deb"
#     - "rm temp.deb"
#     - "cf api https://api.run.pivotal.io"
#     - "cf login --u $CF_USERNAME --p $CF_PASSWORD --o jamesclonk.io --s development"
#     - "cf push"
#     - "cf logout"

notifications:
  email:
    on_success: change
    on_failure: always
